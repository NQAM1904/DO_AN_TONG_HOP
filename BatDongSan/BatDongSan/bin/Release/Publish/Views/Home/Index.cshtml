@{
    ViewBag.Title = "Home Page";
    int? idBuild = (int?)ViewBag.idBuild;
    string timKiem = ViewBag.TimKiem;
}
<style>
    .list-news:hover {
        text-decoration: none;
        color: blue;
    }
</style>
<div class="slide">
    <div class="home-search">
        <div class="home-search-tool">
            <ul class="home-search-tab">
                <li class="actived" ptype="38">
                    <h2>Nhà đất bán</h2>
                </li>
                <li>
                    <h2>Nhà đất cho thuê</h2>
                </li>
            </ul>
            <div class="home-search-content">
                <div class="home-search-control">
                    <div class="search-cate">
                        <div class="select-custom">
                            <o id="lblCurrCate">Văn phòng theo quận</o>
                        </div>
                        <div id="divCatagoryReOptions" class="advance-select-options" style="display: none;">
                            <ul>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                                <li vl="0"><span>Tất cả nhà đất</span></li>
                            </ul>
                        </div>
                    </div>
                    <form action="/Home/Index" method="get">
                        <div class="search-input">
                            <input type="text" id="txtSearch" placeholder="Nhập địa điểm hoặc từ khóa (ví dụ: Vinhomes)"
                                   autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true"
                                   name="timkiem" class="ui-autocomplete-input">
                        </div>
                        <div class="search-button">
                            <button type="submit" class="btn-home-search" id="btnSearch">Tìm kiếm</button>
                        </div>
                        <div class="clear"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/HinhAnh/slide 1.png" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="~/HinhAnh/slide 2.png" class="d-block w-100" alt="...">
            </div>
        </div>
    </div>
</div>
<!--carousel-->
<!--Page tin tức-->
<div class="page-news">
    <div class="container container-news">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item font-new">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab"
                   aria-controls="home" aria-selected="true">Tin nổi bật</a>
            </li>
            <li class="nav-item font-new">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                   aria-controls="profile" aria-selected="false">Tin tức</a>
            </li>
            <li class="nav-item font-new">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab"
                   aria-controls="contact" aria-selected="false">Tư vấn</a>
            </li>
            <li class="option-more">
                <a href="/Home/TinTuc">Xem thêm <i class="fa fa-arrow-right"></i> </a>
            </li>
        </ul>
        <div class="section-content">
            <div class="tab-content" id="myTabContent">
                @using (BDSEntities db = new BDSEntities())
                {
                    int id = 3;
                    var lstNews = db.NEWS.Where(x => x.idNews == id);
                    var a = lstNews.FirstOrDefault();
                    foreach (var item in lstNews)
                    {
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    @if (item.Img == null)
                    {
                        <img src="~/Images/@item.Img" class="img-news" width="450" />
                    }
                    else
                    {
                        <img src="~/HinhAnh/no-img.jpg" class="img-news" width="450" />
                    }
                    <div class="content-news">
                        <h2><b>@item.titleNews</b></h2>
                    </div>
                </div>
                    }
                }
                <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">...</div>
                <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...</div>
            </div>
            @using (BDSEntities db = new BDSEntities())
            {

                <div class="main2">

                    <div class="list-item">
                        @foreach (var list in db.NEWS.ToList().GetRange(1, 5))
                        {
                            <ul class="list-news">
                                <li class="">
                                    <h3>
                                        <a class="list-news" data-index="#hottab-0" href="/Home/ChiTietTinTuc/@list.idNews">@list.titleNews</a>
                                    </h3>
                                </li>
                            </ul>
                        }
                    </div>
                </div>
            }

        </div>

    </div>
</div>

<!--page sản phẩm-->
<div class="page-toa-nha">
    <div class="container">
        <br>
        <h2>Tin rao nhanh cho bạn</h2>
        <br>
        <div class="row">
            @using (BDSEntities db = new BDSEntities())
            {
                var list = db.BUILDINGs.Where(x => (idBuild == null || x.idBuild == idBuild) && (timKiem == null || x.nameBuild.ToLower().IndexOf(timKiem.ToLower()) >= 0)).ToList();
                int lay8item = 0;
                foreach (var item in list)
                {
                    lay8item++;
                    if (lay8item >= 9)
                    {
                        break;
                    }
                    var hinh = db.IMAGEs.Where(x => x.idBuild == item.idBuild).FirstOrDefault();
                  
                    string GiaTien = String.Format("{0:N0}", item.price);
                    <div class="col-3" onclick="window.location.href = '/Home/ChiTietToaNha/@item.idBuild' ">
                        <br />
                        <div class="card" style="width: 18rem;">
                            @if (hinh != null)
                            {
                                <img src="~/Images/@hinh.nameImage" height="180" class="card-img-top">
                            }
                            else
                            {

                                <img src="~/HinhAnh/no-img.jpg" height="180" class="card-img-top" />
                            }

                            <div class="card-body">
                                <h5 class="card-title">@item.nameBuild</h5>
                                <p class="card-text">
                                    <span><i class="fas fa-dollar-sign"></i> Giá thuê:</span>
                                    <span style="color: red;">@GiaTien VNĐ</span>
                                </p>
                                <p class="card-text">
                                    <span><i class="fas fa-map-marker-alt"></i> @item.street</span>
                                </p>
                                <p class="card-text">
                                    <span><i class="fas fa-cube"></i> Diên tích:</span>
                                    <span>@item.floorarea m<sup>2</sup></span>
                                </p>
                                <p class="card-text">
                                    <span><i class="fas fa-dollar-sign"></i> Hướng:</span>
                                    <span>@item.HUONG.nameHuong</span>
                                </p>
                            </div>
                        </div>
                    </div>

                }
            }
        </div>
        <div id="ShowBuild" style="display: none;">
            @{
                Html.RenderPartial("_partialloadmore");
            }
        </div>
        <br>

        <div class="nut-xem-them">
            <div class="center">
                <button class="btn btn-outline-primary" onclick="Loadmore()">
                    Mở rộng <i class="fa fa-arrow-down" style="margin-top: 5px;"></i>
                </button>
            </div>
        </div>
        <br>

    </div>
</div>

<script>

    Loadmore = () => {
        $("#ShowBuild").show();
    }

</script>